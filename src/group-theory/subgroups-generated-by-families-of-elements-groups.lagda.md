# Subgroups generated by families of elements

```agda
module group-theory.subgroups-generated-by-families-of-elements-groups where
```

<details><summary>Imports</summary>

```agda
open import foundation.dependent-pair-types
open import foundation.identity-types
open import foundation.images
open import foundation.logical-equivalences
open import foundation.propositional-truncations
open import foundation.subtypes
open import foundation.universal-property-image
open import foundation.universe-levels

open import group-theory.groups
open import group-theory.subgroups
open import group-theory.subgroups-generated-by-subsets-groups
open import group-theory.subsets-groups
```

</details>

## Idea

Consider a family `(xᵢ)ᵢ` of elements in a [group](group-theory.groups.md) `G`. The **subgroup generated by** `(xᵢ)ᵢ` is the [subgroup generated by the subset](gorup-theory.subgroups-generated-by-subsets.md) of all the elements of the form `xᵢ` for some `i` in the indexing type of `(xᵢ)ᵢ`. In other words, the subgroup generated by `(xᵢ)ᵢ` is the least [subgroup](group-theory.subgroups.md) that contains all the elements `xᵢ`.

## Definitions

### The predicate of being a subgroup generated by a family of elements

```agda
module _
  {l1 l2 l3 : Level} (G : Group l1) {I : UU l2} (x : I → type-Group G)
  (H : Subgroup l3 G)
  where

  is-subgroup-generated-by-family-of-elements-Group : UUω
  is-subgroup-generated-by-family-of-elements-Group =
    {l4 : Level} (K : Subgroup l4 G) →
    leq-Subgroup G H K ↔ ((i : I) → is-in-Subgroup G K (x i))

  contains-family-of-elements-is-subgroup-generated-by-family-of-elements-Group :
    is-subgroup-generated-by-family-of-elements-Group →
    (i : I) → is-in-Subgroup G H (x i)
  contains-family-of-elements-is-subgroup-generated-by-family-of-elements-Group
    U =
    forward-implication (U H) (refl-leq-Subgroup G H)

  leq-subgroup-is-subgroup-generated-by-family-of-elements-Group :
    is-subgroup-generated-by-family-of-elements-Group →
    {l4 : Level} (K : Subgroup l4 G) (k : (i : I) → is-in-Subgroup G K (x i)) →
    leq-Subgroup G H K
  leq-subgroup-is-subgroup-generated-by-family-of-elements-Group U K =
    backward-implication (U K)
```

### The subgroup generated by a family of elements in a group

```agda
module _
  {l1 l2 : Level} (G : Group l1) {I : UU l2} (x : I → type-Group G)
  where

  subgroup-family-of-elements-Group : Subgroup (l1 ⊔ l2) G
  subgroup-family-of-elements-Group =
    subgroup-subset-Group G (subtype-im x)

  subset-subgroup-family-of-elements-Group : subset-Group (l1 ⊔ l2) G
  subset-subgroup-family-of-elements-Group =
    subset-Subgroup G subgroup-family-of-elements-Group

  is-in-subgroup-family-of-elements-Group : type-Group G → UU (l1 ⊔ l2)
  is-in-subgroup-family-of-elements-Group =
    is-in-Subgroup G subgroup-family-of-elements-Group

  is-closed-under-eq-subgroup-family-of-elements-Group :
    {x y : type-Group G} → is-in-subgroup-family-of-elements-Group x →
    x ＝ y → is-in-subgroup-family-of-elements-Group y
  is-closed-under-eq-subgroup-family-of-elements-Group =
    is-closed-under-eq-Subgroup G subgroup-family-of-elements-Group

  is-closed-under-eq-subgroup-family-of-elements-Group' :
    {x y : type-Group G} → is-in-subgroup-family-of-elements-Group y →
    x ＝ y → is-in-subgroup-family-of-elements-Group x
  is-closed-under-eq-subgroup-family-of-elements-Group' =
    is-closed-under-eq-Subgroup' G subgroup-family-of-elements-Group

  contains-unit-subgroup-family-of-elements-Group :
    contains-unit-subset-Group G subset-subgroup-family-of-elements-Group
  contains-unit-subgroup-family-of-elements-Group =
    contains-unit-Subgroup G subgroup-family-of-elements-Group

  is-closed-under-multiplication-subgroup-family-of-elements-Group :
    is-closed-under-multiplication-subset-Group G
      subset-subgroup-family-of-elements-Group
  is-closed-under-multiplication-subgroup-family-of-elements-Group =
    is-closed-under-multiplication-Subgroup G subgroup-family-of-elements-Group

  is-closed-under-inverses-subgroup-family-of-elements-Group :
    is-closed-under-inverses-subset-Group G
      subset-subgroup-family-of-elements-Group
  is-closed-under-inverses-subgroup-family-of-elements-Group =
    is-closed-under-inverses-Subgroup G subgroup-family-of-elements-Group

  abstract
    is-subgroup-generated-by-family-of-elements-subgroup-family-of-elements-Group :
      is-subgroup-generated-by-family-of-elements-Group G x
        subgroup-family-of-elements-Group
    is-subgroup-generated-by-family-of-elements-subgroup-family-of-elements-Group
      H =
      logical-equivalence-reasoning
        leq-Subgroup G subgroup-family-of-elements-Group H
        ↔ subtype-im x ⊆ subset-Subgroup G H
          by adjoint-relation-subgroup-subset-Group G (subtype-im x) H
        ↔ ((i : I) → is-in-Subgroup G H (x i))
          by is-image-subtype-subtype-im x (subset-Subgroup G H)

  abstract
    contains-element-subgroup-family-of-elements-Group :
      (i : I) → is-in-subgroup-family-of-elements-Group (x i)
    contains-element-subgroup-family-of-elements-Group i =
      contains-subset-subgroup-subset-Group G
        ( subtype-im x)
        ( x i)
        ( unit-trunc-Prop (i , refl))
        
  abstract
    leq-subgroup-family-of-elements-Group :
      {l : Level} (H : Subgroup l G) →
      ((i : I) → is-in-Subgroup G H (x i)) →
      leq-Subgroup G subgroup-family-of-elements-Group H
    leq-subgroup-family-of-elements-Group H =
      backward-implication
        ( is-subgroup-generated-by-family-of-elements-subgroup-family-of-elements-Group
          H)
```
