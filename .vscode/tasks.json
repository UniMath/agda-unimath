{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "quality-test",
      "detail": "Run GitHub tests",
      "problemMatcher": [],
      "group": {
        "kind": "test",
        "isDefault": true
      },
      "dependsOn": ["link-check", "typecheck-after-pre-commit"],
      "dependsOrder": "parallel"
    },
    {
      "label": "typecheck",
      "detail": "Typecheck the library",
      "type": "shell",
      "command": "make",
      "args": ["check"],
      "problemMatcher": [],
      "group": { "kind": "build" },
      "presentation": {
        "panel": "dedicated",
        "clear": true
      }
    },
    {
      "label": "typecheck-after-pre-commit",
      "detail": "Typecheck the library after running pre-commit",
      "type": "shell",
      "command": "make",
      "args": ["check"],
      "problemMatcher": [],
      "group": { "kind": "build" },
      "dependsOn": "pre-commit",
      "presentation": {
        "panel": "dedicated",
        "clear": true
      },
      "hide": true
    },
    {
      "label": "pre-commit",
      "detail": "Check and fix code conventions",
      "type": "shell",
      "command": "pre-commit",
      "args": ["run", "--all-files"],
      "problemMatcher": [],
      "hide": true,
      "presentation": {
        "panel": "dedicated",
        "clear": true
      }
    },
    {
      "label": "link-check",
      "detail": "Check website links and bibtex references",
      "type": "shell",
      "command": "make",
      "args": ["SKIPAGDA=1", "website"],
      "problemMatcher": [],
      "group": {
        "kind": "test"
      },
      "presentation": {
        "panel": "dedicated",
        "clear": true
      }
    },
    {
      "label": "remove-unused-imports",
      "detail": "Search for and remove unused imports",
      "type": "shell",
      "command": "python3",
      "args": ["${workspaceFolder}/scripts/remove_unused_imports.py"],
      "problemMatcher": [],
      "hide": true
    },
    {
      "label": "demote-foundation-imports",
      "detail": "Search for and demote imports",
      "type": "shell",
      "command": "python3",
      "args": ["${workspaceFolder}/scripts/demote_foundation_imports.py"],
      "problemMatcher": [],
      "hide": true
    },
    {
      "label": "unused-imports",
      "detail": "Demotes imports from `foundation` to `foundation-core` when possible in `foundation` and `foundation-core` modules. Very slow!",
      "type": "shell",
      "command": "python3",
      "args": ["${workspaceFolder}/scripts/demote_foundation_imports.py"],
      "problemMatcher": [],
      "dependsOn": ["remove-unused-imports", "demote-foundation-imports"],
      "dependsOrder": "sequence",
      "hide": true
    },
    {
      "label": "unused-imports-here",
      "detail": "Remove unused imports in current file",
      "type": "shell",
      "command": "${workspaceFolder}/scripts/remove_unused_imports.py",
      "args": ["${relativeFile}"],
      "problemMatcher": [],
      // "hide": true,
      "presentation": {
        "revealProblems": "onProblem",
        "close": false
      },
      "runOptions": {
        "runOn": "default",
        "instanceLimit": 99
      }
    }
  ],
  "statusbar.default.hide": false
}
